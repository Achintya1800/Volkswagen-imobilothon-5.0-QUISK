# # YOLOv10 + DINOv3 Configuration File
# # Configured for 3-class road hazard detection

# # Model Configuration
# model:
#   type: yolov10
#   variant: s  # Options: n, s, m, b, l, x
#   pretrained: true
#   weights: yolov10s.pt

# # Distillation Configuration
# distillation:
#   enabled: true
#   teacher: dinov2_vitb14
#   method: distillationv2
#   weight: 0.5
#   temperature: 4.0

# # Dataset Configuration - UPDATED FOR 3 CLASSES
# data:
#   path: datasets/unified_road_hazards_v10
#   train: images/train
#   val: images/val
#   nc: 3  # 3 classes: pothole, speed_bump, debris
#   names: ['pothole', 'speed_bump', 'debris']

# # Training Hyperparameters
# train:
#   epochs: 350
#   batch_size: 8
#   imgsz: 640
#   device: 0
#   workers: 8
  
#   optimizer: AdamW
#   lr0: 0.001
#   lrf: 0.01
#   momentum: 0.937
#   weight_decay: 0.0005
  
#   warmup_epochs: 3
#   warmup_momentum: 0.8
#   warmup_bias_lr: 0.1
  
#   hsv_h: 0.015
#   hsv_s: 0.7
#   hsv_v: 0.4
#   degrees: 0.0
#   translate: 0.1
#   scale: 0.5
#   shear: 0.0
#   perspective: 0.0
#   flipud: 0.0
#   fliplr: 0.5
#   mosaic: 1.0
#   mixup: 0.0
#   copy_paste: 0.0
  
#   close_mosaic: 10
#   amp: true

# # Validation Configuration
# val:
#   batch_size: 16
#   imgsz: 640
#   conf: 0.001
#   iou: 0.6
#   plots: true
#   save_json: true

# # Inference Configuration
# inference:
#   conf: 0.25
#   iou: 0.45
#   max_det: 300
#   device: 0
#   agnostic_nms: false

# # Paths
# paths:
#   project: experiments/yolov10_dinov3
#   name: run
#   exist_ok: false
#   save_period: 10

# # Class-specific settings - UPDATED FOR 3 CLASSES
# classes:
#   pothole:
#     id: 0
#     color: [0, 0, 255]  # Red (BGR)
#     priority: high
  
#   speed_bump:
#     id: 1
#     color: [0, 255, 255]  # Yellow (BGR)
#     priority: high
  
#   debris:
#     id: 2
#     color: [255, 0, 0]  # Blue (BGR)
#     priority: medium


# YOLOv10 + DINOv3 Configuration File
# Optimized for 70%+ Performance on Balanced 3-Class Dataset

# Model Configuration
model:
  type: yolov10
  variant: s  # YOLOv10-Small (perfect for RTX 4060 + 1,770 images)
  pretrained: true
  weights: yolov10s.pt

# Distillation Configuration
distillation:
  enabled: true
  teacher: dinov2_vitb14
  method: distillationv2
  weight: 0.5
  temperature: 4.0

# Dataset Configuration - FOR MAXIMUM BALANCED DATA
data:
  path: datasets/unified_road_hazards_v10  # ✅ CHANGED from unified_road_hazards_v10
  train: images/train
  val: images/val
  test: images/test
  nc: 3  # 3 classes: pothole, speed_bump, debris
  names: ['pothole', 'speed_bump', 'debris']

# Training Hyperparameters - OPTIMIZED FOR 70%+ PERFORMANCE
train:
  epochs: 350  # ✅ Sufficient for convergence
  batch_size: 8  # ✅ Safe for RTX 4060
  imgsz: 640
  device: 0
  workers: 8
  
  # ========== OPTIMIZER - STRONGER FOR 70%+ ==========
  optimizer: AdamW
  lr0: 0.002      # ✅ INCREASED from 0.001 (better learning)
  lrf: 0.0005     # ✅ CHANGED from 0.01 (very low final LR for fine-tuning)
  momentum: 0.95  # ✅ INCREASED from 0.937 (stronger momentum)
  weight_decay: 0.0008  # ✅ INCREASED (better regularization)
  
  # ========== WARMUP - LONGER FOR STABILITY ==========
  warmup_epochs: 8      # ✅ INCREASED from 3 (more stable start)
  warmup_momentum: 0.85  # ✅ CHANGED
  warmup_bias_lr: 0.1
  
  # ========== DATA AUGMENTATION - AGGRESSIVE FOR 70%+ ==========
  hsv_h: 0.03         # ✅ INCREASED from 0.015 (more color variation)
  hsv_s: 0.9          # ✅ INCREASED from 0.7 (stronger saturation)
  hsv_v: 0.6          # ✅ INCREASED from 0.4 (stronger value shift)
  degrees: 5.0        # ✅ ADDED (rotation)
  translate: 0.2      # ✅ INCREASED from 0.1 (more translation)
  scale: 0.8          # ✅ INCREASED from 0.5 (more scaling)
  shear: 3.0          # ✅ ADDED (shear transformation)
  perspective: 0.0002 # ✅ ADDED (perspective)
  flipud: 0.3         # ✅ CHANGED from 0.0 (enable vertical flip)
  fliplr: 0.5
  mosaic: 1.0
  mixup: 0.2          # ✅ ADDED (was 0.0 - critical for balanced learning)
  copy_paste: 0.15    # ✅ ADDED (was 0.0 - creates diverse samples)
  
  # ========== ADVANCED SETTINGS ==========
  close_mosaic: 25    # ✅ CHANGED from 10 (longer normal augmentation)
  amp: true           # ✅ Keep (memory efficient)

# Validation Configuration
val:
  batch_size: 16  # Safe with batch 8 training
  imgsz: 640
  conf: 0.001
  iou: 0.6
  plots: true
  save_json: true

# Inference Configuration
inference:
  conf: 0.25
  iou: 0.45
  max_det: 300
  device: 0
  agnostic_nms: false

# Paths
paths:
  project: experiments/yolov10_70plus  # ✅ NEW project name
  name: run
  exist_ok: false
  save_period: 10

# Class-specific settings
classes:
  pothole:
    id: 0
    color: [0, 0, 255]      # Red (BGR)
    priority: high
    expected_ap: 0.72
  
  speed_bump:
    id: 1
    color: [0, 255, 255]    # Yellow (BGR)
    priority: high
    expected_ap: 0.71
  
  debris:
    id: 2
    color: [255, 0, 0]      # Blue (BGR)
    priority: medium
    expected_ap: 0.69

# Performance Target
performance_targets:
  mAP50: 0.70
  precision: 0.72
  recall: 0.73
  accuracy: 0.73
